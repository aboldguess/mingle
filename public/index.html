<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Mingle Prototype</title>
  <style>
    /* Make the scene occupy the full viewport */
    html, body { width: 100%; height: 100%; margin: 0; font-family: Arial, sans-serif; }
    a-scene { width: 100%; height: 100%; }
    #instructions {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(0,0,0,0.6);
      color: #fff;
      padding: 10px;
      z-index: 100;
    }
  </style>
</head>
<body>
  <div id="instructions">
    <p>Use WASD to move and mouse to look.</p>
    <p>Your webcam feed appears on your avatar.</p>
  </div>

  <!-- Main A-Frame scene. Removing 'embedded' allows full-screen rendering -->
  <a-scene>
    <a-assets>
      <video id="localVideo" autoplay playsinline></video>
    </a-assets>

    <!-- Simple floor and lighting -->
    <a-plane rotation="-90 0 0" width="20" height="20" color="#7BC8A4"></a-plane>
    <a-entity light="type: ambient; intensity: 0.5"></a-entity>
    <a-entity light="type: directional; intensity: 0.8" position="0 1 1"></a-entity>

    <!-- User avatar with video texture -->
    <a-box id="avatar" position="0 1.6 0" width="1" height="1" depth="0.1" material="src:#localVideo"></a-box>

    <!-- Camera rig for first-person movement -->
    <a-entity id="rig" position="0 1.6 3">
      <a-camera wasd-controls-enabled="true" look-controls="pointerLockEnabled: true"></a-camera>
    </a-entity>
  </a-scene>

  <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/socket.io-client@4.7.2/dist/socket.io.min.js"></script>
  <script src="js/mingle_client.js"></script>
</body>
</html>
